<?xml version="1.0"?>
<launch>
  <!-- 개선된 GPS Heading 설정 노드 -->
  <node pkg="husky_dwa_navigation" type="gps_heading_initializer.py" 
        name="improved_gps_heading_initializer" output="screen">
    <param name="fixed_frame" value="utm"/>
    <param name="robot_frame" value="base_link"/>
    <param name="gps_frame" value="gps_link"/>
    <param name="heading_samples" value="30"/>
    <param name="utm_zone" value=""/>
    <param name="utm_band" value=""/>
  </node>

  <!-- GPS 토픽 확인을 위한 릴레이 -->
  <node pkg="topic_tools" type="relay" name="gps_relay" 
        args="/navsat/fix /gps/fix" output="log"/>

  <!-- Heading 적용 상태 모니터링 -->
  <node pkg="rostopic" type="rostopic" name="heading_status_monitor" 
        args="echo /heading_applied" output="log"/>

  <!-- 사용법 안내 -->
  <param name="usage_info" value="=== 개선된 GPS Heading Calibration ===
🤖 로봇을 움직이기만 하면 자동으로 heading 계산
📏 최소 0.5m 이동 감지 시 자동 캘리브레이션
⏰ 8초 안정성 체크 후 heading 계산
🔄 여러 방법으로 localization에 적용 시도
📊 상태 확인: rostopic echo /gps_heading_status
🎯 적용 확인: rostopic echo /heading_applied
📡 GPS 좌표 차이 로그 자동 출력 (5초당 1번)"/>

</launch>